{% extends "base.html" %}

{% block content %}
<div class="columns">
    <div class="column is-one-quarter">
        <div class="box">
            <h1 class="title">
              User List
            </h1>
            <img src="/assets/img/atxcf_logo_small.jpg">
        </div>
        <div class="box post-box-img"></div>
    </div>
    <div class="column has-text-left">
        <div class="box">
            <table class="table" style="font-size: smaller; font-family:'Courier New', Courier, monospace">
                <thead>
                  <tr>
                    <th>Avatar</th>
                    <th>Username</th>
                    <th>Name</th>
                    {% if current_user.is_admin %}
                    <th>Email</th>
                    {% endif %}
                    <th>uv/pv</th>
                    <th>Last Login</th>
                    {% if current_user.is_admin %}
                    <th>Last Addr</th>
                    {% endif %}
                  </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>
                            <a href="/u/{{ user.username }}">
                                <figure class="image is-32x32">
                                    <img src="{{ user.avatar_url }}">
                                </figure>
                            </a>
                        </td>
                        <td>
                            <span class="icon-text">
                                <span>{{ user.username }}</span>
                                {% if user.is_admin %}
                                <span class="icon has-text-info">
                                    <i class="fas fa-check-square"></i>
                                </span>
                                {% endif %}
                            </span>
                        </td>
                        <td>{{ user.name }}</td>
                        {% if current_user.is_admin %}
                        <td>
                        {% if user.email_verified %}
                        <span class="icon-text">
                            <span>{{ user.email }}</span>
                            <span class="icon has-text-success">
                                <i class="fas fa-check-square"></i>
                            </span>
                        </span>
                        {% else %}
                        <span class="icon-text">
                            <span>{{ user.email }}</span>
                            <span class="icon has-text-warning">
                                <i class="fas fa-exclamation-triangle"></i>
                            </span>
                        </span>
                        {% endif %}
                        </td>
                        {% endif %}
                        <td>{{ user.view_count }}/{{ user.post_view_count }}</td>
                        {% if user.last_login %}
                        <td>{{ user.last_login.ctime() }}</td>
                        {% else %}
                        <td>None</td>
                        {% endif %}
                        {% if current_user.is_admin %}
                        <td>{{ user.last_login_addr }}</td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
